title Calculator

.calc
  .from-calc#calc
    = simple_form_for :calc do |f|
      .form-input
        label for='role_id' Class
        = f.collection_select :role_id, @roles, :id, :name
      .form-input#char
        label for='char_id' Hero
        = f.grouped_collection_select :char_id, @roles, :chars, :name, :id, :name

      .heroGear
        div
        div
          .form-input#empty-block
            .gOption#g-rune
              .opt#rune
                p#rune-w
                  img src="/images/media/icons/runeA.webp" title='Runes Laz' alt='Runes Laz'
                div#rune-he
                  = f.select :rune_w_1,
                             @runes.where(type_gear: ['weapon', 'all'],
                             tier: ['Common', 'Velkazar']).collect {|r| [r.name, r.name, {class: r.type_gear}]},
                             {include_blank: false},
                             class: 'ax-r null-name'
                div#rune-wi
                  = f.select :st_rune_w_1,
                             @runes.where(type_gear: ['weapon', 'all']).collect {|r| [r.value, r.value, {name: r.name}]},
                             {include_blank: false},
                             class: 'ay-r null-stat'
              .opt#rune
                p#rune-w
                  img src="/images/media/icons/runeA.webp" title='Runes Doh' alt='Runes Doh'
                div#rune-he
                  = f.select :rune_w_2,
                             @runes.where(type_gear: ['weapon', 'all'],
                             tier: ['Common', 'Velkazar']).collect {|r| [r.name, r.name, {class: r.type_gear}]},
                             {include_blank: false},
                             class: 'ax-r null-name'
                div#rune-wi
                  = f.select :st_rune_w_2,
                             @runes.where(type_gear: ['weapon', 'all']).collect {|r| [r.value, r.value, {name: r.name}]},
                             {include_blank: false},
                             class: 'ay-r null-stat'
              .opt#rune
                p#rune-w
                  img src="/images/media/icons/runeA.webp" title='Runes Geb' alt='Runes Geb'
                div#rune-he
                  = f.select :rune_w_3,
                             @runes.where(type_gear: ['weapon', 'all'],
                             tier: ['Common', 'Velkazar']).collect {|r| [r.name, r.name, {class: r.type_gear}]},
                             {include_blank: false},
                             class: 'ax-r null-name'
                div#rune-wi
                  = f.select :st_rune_w_3,
                             @runes.where(type_gear: ['weapon', 'all']).collect {|r| [r.value, r.value, {name: r.name}]},
                             {include_blank: false},
                             class: 'ay-r null-stat'
              .opt#rune
                p#rune-s
                  img src="/images/media/icons/runeA.webp" title='Runes Ans' alt='Runes Ans'
                div#rune-he
                  = f.select :rune_s,
                             @runes.where(type_gear: ['secondary', 'all'],
                             tier: ['Common', 'Velkazar']).collect {|r| [r.name, r.name, {class: r.type_gear}]},
                             {include_blank: false},
                             class: 'ax-r null-name',
                             id: 'calc_rune_s'
                div#rune-wi
                  = f.select :st_rune_s,
                             @runes.where(type_gear: ['secondary', 'all']).collect {|r| [r.value, r.value, {name: r.name}]},
                             {include_blank: false},
                             class: 'ay-r null-stat',
                             id: 'calc_st_rune_s'
              .opt#rune
                p#rune-a
                  img src="/images/media/icons/runeA.webp" title='Runes Oth' alt='Runes Oth'
                div#rune-he
                  = f.select :rune_a,
                             @runes.where(type_gear: ['armor', 'all'],
                             tier: ['Common', 'Velkazar']).collect {|r| [r.name, r.name, {class: r.type_gear}]},
                             {include_blank: false},
                             class: 'ax-r null-name',
                             id: 'calc_rune_a'
                div#rune-wi
                  = f.select :st_rune_a,
                             @runes.where(type_gear: ['armor', 'all']).collect {|r| [r.value, r.value, {name: r.name}]},
                             {include_blank: false},
                             class: 'ay-r null-stat',
                             id: 'calc_st_rune_a'
          .form-input#weapon
            = f.input :gear_weapon,
                      as: :select,
                      collection: ['Class', 'Unique'],
                      required: false,
                      label: false,
                      include_blank: false,
                      input_html: {class: 'w-in null-name'}
            .g-desc
              / *Load from JSON file*
              / - @gearsJ.each do |gear|
                - if gear['gear_type'] == '10-UW'
                  p id='ch-#{gear['char_id']}'
                    = gear['description']
              - @gears.each do |gear|
                - if gear.gear_type == '10-UW'
                  p id='ch-#{gear.char_id}' #{gear.description}
            .w-d-icon
              img src='/images/help.svg' id='w-d'
            .gSt
              p tag='weapon'
              .rating#uw.c
                = render 'stars'
            .gOption#g-weapon
              .opt#ow
                = f.input :st_weapon,
                          as: :select,
                          collection: ['Adv.0', 'Adv.1', 'Adv.2'],
                          required: false,
                          label: false,
                          include_blank: false,
                          prompt: '- - - - - - - - - -',
                          input_html: {class: 'w-ad'}
                = f.input :st_weapon_st,
                          as: :select,
                          collection: 0..20,
                          required: false,
                          label: false,
                          include_blank: false,
                          prompt: '- - -',
                          input_html: {class: 'w-ad-enh'}
                .range
                  .r-sl
                    span.range-ou1
                    input type='range' name='range' min='30' max='70' step='0.1'
                    span.range-ou2
                  .r-sl
                    span.range-ad1#range
                    input type='range' name='add-atk' class='r-add' min='0' max='20' step='0.1'
                    input type='range' name='add-hp' class='r-add' min='0' max='20' step='0.1'
                    span.range-ad2#range
                  .r-sl
                    p#range-atk
                    p#range-hp
          .form-input#armor
            = f.input :gear_armor,
                      as: :select,
                      collection: @gears.where(gear_type: 'acc').collect {|g| [g.set, g.set]},
                      required: false,
                      label: false,
                      include_blank: false,
                      input_html: {class: 'null-name'}
            .gSt
              p tag='armor'
              .rating#ar.c
                = render 'stars'
            .gOption#g-left
              .opt
                .input.select.optional.calc_armor_1
                  = f.collection_select :armor_1,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_armor'
                = f.input :st_armor_1,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_armor_st'}
              .opt
                .input.select.optional.calc_armor_2
                  = f.collection_select :armor_2,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_armor'
                = f.input :st_armor_2,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_armor_st'}
              .opt
                .input.select.optional.calc_armor_3
                  = f.collection_select :armor_3,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_armor'
                = f.input :st_armor_3,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_armor_st'}
              .opt
                .input.select.optional.calc_armor_4
                  = f.collection_select :armor_4,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_armor'
                = f.input :st_armor_4,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_armor_st'}
              .opt-enh
                p#scroll
                  img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                .input.select.optional.calc_enh_ar
                  = f.collection_select :enh_ar,
                                        @stats.where(stat_type: 'scroll'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'enh-n',
                                        id: 'armor_enh'
                = f.input :enh_ar_st,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'enh').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'enh-v null-stat'}
            .gTM#g-left
              .opt
                .input.select.optional.calc_armor_tm_1
                  = f.collection_select :armor_tm_1,
                                        @stats.where(stat_type: 'tm'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax-tm',
                                        id: 'calc_st_armor'
                = f.input :st_armor_tm_1,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tm-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay-tm null-stat', id: 'calc_st_armor_st'}
              .opt
                .input.select.optional.calc_armor_tm_2
                  = f.collection_select :armor_tm_2,
                                        @stats.where(stat_type: 'tm'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax-tm',
                                        id: 'calc_st_armor'
                = f.input :st_armor_tm_2,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tm-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay-tm null-stat', id: 'calc_st_armor_st'}
              .opt#tm
                .input.select.optional.calc_st_armor_op
                  = f.collection_select :st_armor_op,
                                        @stats.where(stat_type: 'tm-opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'tm-op',
                                        tag: 'prop_armor'
              .opt-tm-enh
                .opt-enh#a0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_ar_tm_1
                    = f.collection_select :enh_ar_tm_1,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'armor_enh_tm'
                  = f.input :enh_ar_tm_st_1,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_ar_tm_st'}
                .opt-enh#b0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_ar_tm_2
                    = f.collection_select :enh_ar_tm_2,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'armor_enh_tm'
                  = f.input :enh_ar_tm_st_2,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_ar_tm_st'}
                .opt-enh#c0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_ar_tm_3
                    = f.collection_select :enh_ar_tm_3,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'armor_enh_tm'
                  = f.input :enh_ar_tm_st_3,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_ar_tm_st'}
          .form-input#secondary
            = f.input :gear_secondary,
                      as: :select,
                      collection: @gears.where(gear_type: 'acc').collect {|g| [g.set, g.set]},
                      required: false,
                      label: false,
                      include_blank: false,
                      input_html: {class: 'null-name'}
            .gSt
              p tag="secondary"
              .rating#se.c
                = render 'stars'
            .gOption#g-left
              .opt
                .input.select.optional.calc_secondary_1
                  = f.collection_select :secondary_1,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_secondary'
                = f.input :st_secondary_1,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_secondary_st'}
              .opt
                .input.select.optional.calc_secondary_2
                  = f.collection_select :secondary_2,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_secondary'
                = f.input :st_secondary_2,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_secondary_st'}
              .opt
                .input.select.optional.calc_secondary_3
                  = f.collection_select :secondary_3,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_secondary'
                = f.input :st_secondary_3,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_secondary_st'}
              .opt
                .input.select.optional.calc_secondary_4
                  = f.collection_select :secondary_4,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_secondary'
                = f.input :st_secondary_4,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_secondary_st'}
              .opt-enh
                p#scroll
                  img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                .input.select.optional.calc_enh_sg
                  = f.collection_select :enh_sg,
                                        @stats.where(stat_type: 'scroll'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'enh-n',
                                        id: 'secondary_enh'
                = f.input :enh_sg_st, as: :select,
                          collection: @stats.order(:id).where(stat_type: 'enh').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'enh-v null-stat'}
            .gTM#g-left
              .opt
                .input.select.optional.calc_secondary_tm_1
                  = f.collection_select :secondary_tm_1,
                                        @stats.where(stat_type: 'tm'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax-tm',
                                        id: 'calc_st_secondary'
                = f.input :st_secondary_tm_1,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tm-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay-tm null-stat', id: 'calc_st_secondary_st'}
              .opt
                .input.select.optional.calc_secondary_tm_2
                  = f.collection_select :secondary_tm_2,
                                        @stats.where(stat_type: 'tm'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax-tm',
                                        id: 'calc_st_secondary'
                = f.input :st_secondary_tm_2,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tm-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay-tm null-stat', id: 'calc_st_secondary_st'}
              .opt#tm
                .input.select.optional.calc_st_secondary_op
                  = f.collection_select :st_secondary_op,
                                        @stats.where(stat_type: 'tm-opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'tm-op',
                                        tag: 'prop_secondary'
              .opt-tm-enh
                .opt-enh#a0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_sg_tm_1
                    = f.collection_select :enh_sg_tm_1,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'secondary_enh_tm'
                  = f.input :enh_sg_tm_st_1,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_sg_tm_st'}
                .opt-enh#b0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_sg_tm_2
                    = f.collection_select :enh_sg_tm_2,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'secondary_enh_tm'
                  = f.input :enh_sg_tm_st_2,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_sg_tm_st'}
                .opt-enh#c0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_sg_tm_3
                    = f.collection_select :enh_sg_tm_3,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'secondary_enh_tm'
                  = f.input :enh_sg_tm_st_3,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_sg_tm_st'}
        div
          .form-input#treasure
            = f.input :gear_treasure,
                      as: :select,
                      collection: ['Mana Stone', 'Unique'],
                      required: false,
                      label: false,
                      include_blank: false,
                      input_html: {class: 'tr-in null-name'}
            .gSt
              p tag='treasure'
              .rating#tr.c
                = render 'stars'
            .gOption#g-treasure.frst
              .opt#a0
                .input.select.optional.calc_treasure_1
                  = f.collection_select :treasure_1,
                                        @stats.where(stat_type: ['opt', 'tr']),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_treasure'
                = f.input :st_treasure_1,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tr-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_treasure_st'}
              .opt#b0
                .input.select.optional.calc_treasure_2
                  = f.collection_select :treasure_2,
                                        @stats.where(stat_type: ['opt', 'tr']),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_treasure'
                = f.input :st_treasure_2,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tr-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_treasure_st'}
            .gOption#g-treasure.scnd
              .opt#a1
                .input.select.optional.calc_treasure_3
                  = f.collection_select :treasure_3,
                                        @stats.where(stat_type: ['opt', 'tr']),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_treasure'
                = f.input :st_treasure_3,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tr-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_treasure_st'}
              .opt#b1
                .input.select.optional.calc_treasure_4
                  = f.collection_select :treasure_4,
                                        @stats.where(stat_type: ['opt', 'tr']),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_treasure'
                = f.input :st_treasure_4,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tr-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_treasure_st'}
            .gOption#g-treasure.scnd
              .opt#a2
                .input.select.optional.calc_treasure_5
                  = f.collection_select :treasure_5,
                                        @stats.where(stat_type: ['opt', 'tr']),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_treasure'
                = f.input :st_treasure_5,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tr-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_treasure_st'}
              .opt#b2
                .input.select.optional.calc_treasure_6
                  = f.collection_select :treasure_6,
                                        @stats.where(stat_type: ['opt', 'tr']),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_treasure'
                = f.input :st_treasure_6,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tr-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_treasure_st'}
            .gOption#g-treasure.scnd
              .opt#a3
                .input.select.optional.calc_treasure_7
                  = f.collection_select :treasure_7,
                                        @stats.where(stat_type: ['opt', 'tr']),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_treasure'
                = f.input :st_treasure_7,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tr-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_treasure_st'}
              .opt#b3
                .input.select.optional.calc_treasure_8
                  = f.collection_select :treasure_8,
                                        @stats.where(stat_type: ['opt', 'tr']),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_treasure'
                = f.input :st_treasure_8,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tr-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_treasure_st'}
          .form-input#jewelry
            .calc_gear_jewelry
              - acc_1 = @gears.where(gear_type: 'acc').collect {|g| [g.set, g.set]}
              - acc_2 = @gears.where(gear_type: 'acc').where.not(name: 'Technomagic').collect {|g| [g.set, g.set]}
              = f.input :gear_jewelry,
                        as: :grouped_select,
                        collection: [['Ring', acc_1], ['Earrings', acc_1], ['Bracelet', acc_2], ['Necklace', acc_2]],
                        group_method: :last,
                        required: false,
                        label: false,
                        include_blank: false,
                        input_html: {class: 'null-name'}
            .gSt
              p tag='jewelry'
              .rating#je.c
                = render 'stars'
            .gOption#g-right
              .opt
                .input.select.optional.calc_jewelry_1
                  = f.collection_select :jewelry_1,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_jewelry'
                = f.input :st_jewelry_1,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_jewelry_st'}
              .opt
                .input.select.optional.calc_jewelry_2
                  = f.collection_select :jewelry_2,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_jewelry'
                = f.input :st_jewelry_2,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_jewelry_st'}
              .opt
                .input.select.optional.calc_jewelry_3
                  = f.collection_select :jewelry_3,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_jewelry'
                = f.input :st_jewelry_3,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_jewelry_st'}
              .opt
                .input.select.optional.calc_jewelry_4
                  = f.collection_select :jewelry_4,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_jewelry'
                = f.input :st_jewelry_4,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_jewelry_st'}
              .opt-enh
                p#scroll
                  img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                .input.select.optional.calc_enh_j
                  = f.collection_select :enh_j,
                                        @stats.where(stat_type: 'scroll'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'enh-n',
                                        id: 'jewelry_enh'
                = f.input :enh_j_st,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'enh').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'enh-v null-stat'}
            .gTM#g-right
              .opt
                .input.select.optional.calc_jewelry_tm_1
                  = f.collection_select :jewelry_tm_1,
                                        @stats.where(stat_type: 'tm'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax-tm',
                                        id: 'calc_st_jewelry'
                = f.input :st_jewelry_tm_1,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tm-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay-tm null-stat', id: 'calc_st_jewelry_st'}
              .opt
                .input.select.optional.calc_jewelry_tm_2
                  = f.collection_select :jewelry_tm_2,
                                        @stats.where(stat_type: 'tm'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax-tm',
                                        id: 'calc_st_jewelry'
                = f.input :st_jewelry_tm_2,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tm-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay-tm null-stat', id: 'calc_st_jewelry_st'}
              .opt#tm
                .input.select.optional.calc_st_jewelry_op
                  = f.collection_select :st_jewelry_op,
                                        @stats.where(stat_type: 'tm-opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'tm-op'
              .opt-tm-enh
                .opt-enh#a0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_j_tm_1
                    = f.collection_select :enh_j_tm_1,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'jewelry_enh_tm'
                  = f.input :enh_j_tm_st_1,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_j_tm_st'}
                .opt-enh#b0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_j_tm_2
                    = f.collection_select :enh_j_tm_2,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'jewelry_enh_tm'
                  = f.input :enh_j_tm_st_2,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_j_tm_st'}
                .opt-enh#c0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_j_tm_3
                    = f.collection_select :enh_j_tm_3,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'jewelry_enh_tm'
                  = f.input :enh_j_tm_st_3,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_j_tm_st'}
          .form-input#orb
            = f.input :gear_orb,
                      as: :select,
                      collection: @gears.where(gear_type: 'acc').collect {|g| [g.set, g.set]},
                      required: false,
                      label: false,
                      include_blank: false,
                      input_html: {class: 'null-name'}
            .gSt
              p tag='orb'
              .rating#or.c
                = render 'stars'
            .gOption#g-right
              .opt
                .input.select.optional.calc_orb_1
                  = f.collection_select :orb_1,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_orb'
                = f.input :st_orb_1,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_orb_st'}
              .opt
                .input.select.optional.calc_orb_2
                  = f.collection_select :orb_2,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_orb'
                = f.input :st_orb_2,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_orb_st'}
              .opt
                .input.select.optional.calc_orb_3
                  = f.collection_select :orb_3,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_orb'
                = f.input :st_orb_3,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_orb_st'}
              .opt
                .input.select.optional.calc_orb_4
                  = f.collection_select :orb_4,
                                        @stats.where(stat_type: 'opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax',
                                        id: 'calc_st_orb'
                = f.input :st_orb_4,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay null-stat', id: 'calc_st_orb_st'}
              .opt-enh
                p#scroll
                  img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                .input.select.optional.calc_enh_orb
                  = f.collection_select :enh_orb,
                                        @stats.where(stat_type: 'scroll'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'enh-n',
                                        id: 'orb_enh'
                = f.input :enh_orb_st,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'enh').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'enh-v null-stat'}
            .gTM#g-right
              .opt
                .input.select.optional.calc_orb_tm_1
                  = f.collection_select :orb_tm_1,
                                        @stats.where(stat_type: 'tm'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax-tm',
                                        id: 'calc_st_orb'
                = f.input :st_orb_tm_1,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tm-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay-tm null-stat', id: 'calc_st_orb_st'}
              .opt
                .input.select.optional.calc_orb_tm_2
                  = f.collection_select :orb_tm_2,
                                        @stats.where(stat_type: 'tm'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'ax-tm',
                                        id: 'calc_st_orb'
                = f.input :st_orb_tm_2,
                          as: :select,
                          collection: @stats.order(:id).where(stat_type: 'tm-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                          required: false,
                          label: false,
                          include_blank: false,
                          input_html: {class: 'ay-tm null-stat', id: 'calc_st_orb_st'}
              .opt#tm
                .input.select.optional.calc_st_orb_op
                  = f.collection_select :st_orb_op,
                                        @stats.where(stat_type: 'tm-opt'),
                                        :name,
                                        :name,
                                        {prompt: '- - - - - - - - - -'},
                                        class: 'tm-op',
                                        tag: 'prop_orb'
              .opt-tm-enh
                .opt-enh#a0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_orb_tm_1
                    = f.collection_select :enh_orb_tm_1,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'orb_enh_tm'
                  = f.input :enh_orb_tm_st_1,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_orb_tm_st'}
                .opt-enh#b0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_orb_tm_2
                    = f.collection_select :enh_orb_tm_2,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'orb_enh_tm'
                  = f.input :enh_orb_tm_st_2,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_orb_tm_st'}
                .opt-enh#c0
                  p#scroll
                    img src="/images/media/icons/scroll.webp" title='Enhancement' alt='Enhancement'
                  .input.select.optional.calc_enh_orb_tm_3
                    = f.collection_select :enh_orb_tm_3,
                                          @stats.where(stat_type: 'tm-enh'),
                                          :name,
                                          :name,
                                          {prompt: '- - - - - - - - - -'},
                                          class: 'enh-n',
                                          id: 'orb_enh_tm'
                  = f.input :enh_orb_tm_st_3,
                            as: :select,
                            collection: @stats.order(:id).where(stat_type: 'tm-enh-stat').collect {|s| [s.value, s.value, {class: s.name}]},
                            required: false,
                            label: false,
                            include_blank: false,
                            input_html: {class: 'enh-v null-stat', id: 'enh_orb_tm_st'}
          .form-input
            = f.input :gear_artifact,
                      as: :select,
                      collection: @arts.where(gear_type: 'art').collect {|g| [g.name, g.name, {desc: g.description}]},
                      required: false,
                      label: false,
                      include_blank: false,
                      input_html: {class: 'null-name'}
            .gArt
              .calc-art-description
                p
        div

    = render 'share'

  .r-stats.class-stats
    .statData
      .statsBase
        .r-stat
          p#s-name
          p#s-val
      .statsAdd
        .r-stat
          p#s-name
          p#s-val
          p#s-per

  .totalStat#calc
    .hero-img
      - @chars.each do |c|
        .hch class='hero-#{c.id}'
          .heroPerk
            .hero-avatar
              .avatar
                img src='/images/media/heroes/#{c.name.downcase}/portrait.webp' alt=c.name
              p #{c.name}
            .c-sub
              .perk-tp
                img src='/images/slash.svg' id='tp-r' alt=""
                img src='/images/media/classes/TP.webp' alt=""
                p 0
              .c-perk
                .c-p#perk-t1
                  - @perks.where(tier: 'Generic').each do |perk|
                    .c-perk-img
                      img src="/images/media/genericPerks/#{perk.name}.webp" id=perk.sequence alt=perk.name
                      .calc-s-description
                        .p1 #{perk.name}
                        .p4 #{perk.description}
                .c-p#perk-t2
                  - @perks.where(tier: c.role.name).each do |perk|
                    .c-perk-img
                      img src="/images/media/genericPerks/#{perk.name}.webp" id=perk.sequence alt=perk.name
                      .calc-s-description
                        .p1 #{perk.name}
                        .p4 #{perk.description}
                .c-p#perk-t3
                  .c-pepe
                    - @perks.where(tier: c.name).where(perk_type: 'hero').each do |perk|
                      .c-perk-img
                        img src="/images/media/heroes/#{c.name.downcase}/#{perk.sequence}.webp" id=perk.sequence alt=perk.name
                        .calc-s-description
                          .p1 #{perk.name}
                          .p4 #{perk.description}
                .c-p#perk-t5
                  - @perks.where(tier: c.name, perk_type: 't5').each do |perk|
                    .c-perk-img
                      img src="/images/media/heroes/#{c.name.downcase}/#{perk.name}.webp" id=perk.sequence alt=perk.sequence
                      .calc-s-description
                        .p1 #{c.name} [#{perk.name.capitalize}]
                        .p4 #{perk.description}
          .heroImg
            div
              p#p1 Class
              p#p2 #{c.role.name}
            div
              p#p1 ATK Type
              p#p2
                img src="/images/media/#{c.type_dmg}.webp" alt=c.type_dmg
                #{c.type_dmg}
            div
              p#p1 Position
              p#p2 #{c.position}

    = render 'stats'

= render 'shared/alert'
